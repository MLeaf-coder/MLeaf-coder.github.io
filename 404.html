<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>重定向中</title>
    <style>
      /* 隐藏所有页面内容，确保即使有短暂延迟也不会显示内容 */
      body {
        display: none;
        visibility: hidden;
        opacity: 0;
      }
    </style>
    <script>
      // 立即执行函数，加快重定向速度
      (function () {
        // 获取当前 URL 路径
        const location = window.location;
        const pathSegments = location.pathname
          .split("/")
          .filter((p) => p.length > 0);

        // GitHub Pages 项目页面或个人页面判断
        // 对于个人页面 (username.github.io)，设为 0；对于项目页面，设为 1
        const pathSegmentsToKeep =
          location.hostname.endsWith("github.io") &&
          !location.hostname.includes(".")
            ? 0
            : 1;

        // 保存当前路径到 sessionStorage 以便主应用恢复
        const currentPath =
          "/" + pathSegments.slice(pathSegmentsToKeep).join("/");
        sessionStorage.setItem("redirect_path", currentPath);

        // 构建重定向 URL
        const redirectTo =
          location.origin +
          location.pathname
            .split("/")
            .slice(0, pathSegmentsToKeep + 1)
            .join("/") +
          "/" +
          (location.search ? location.search : "");

        // 立即重定向
        window.location.replace(redirectTo);
      })();
    </script>
  </head>
  <body>
    <!-- 完全空白页面，不显示任何内容 -->
  </body>
</html>
